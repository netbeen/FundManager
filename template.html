<!DOCTYPE html>
<html>
 <head> 
  <meta charset="utf-8" /> 
  <title>
    @fundID@基金概览
  </title> 
 </head> 
 <body> 
  <!-- 为ECharts准备一个具备大小（宽高）的Dom --> 
  <div id="unitPriceCompare" style="height:400px"> 
  </div> 
  <div id="profitRateCompare" style="height:400px"> 
  </div> 
  <!-- ECharts单文件引入 --> 
  <script src="../echart-build-dist/echarts.js">
  </script> 
  <script type="text/javascript">
    // 路径配置
    require.config({
      paths: {
        echarts: '../echart-build-dist'
      }
    });

    // 使用
    require(['echarts', 'echarts/chart/line'],
    function(ec) {

	  var xAxisData = [ @dates@ ];
	  var fundValues = [@values@];
	  var fundUnitPrice = [@unitPrices@];
	  var fundProfitRate = [@profitRate@];
	  var fundProfitRatePerYear = [@profitRatePerYear@];

      var unitPriceCompareOption = {
        title: {
          text: '成本净值对比图',
          subtext: @fundID@
        },
        tooltip: {
          trigger: 'axis'
        },
        legend: {
          data: ['单位净值', '持仓成本', '收益率%', '赎回年化收益率%']
        },
        toolbox: {
          show: true,
          feature: {
            dataView: {
              show: true,
              readOnly: false
            },
            restore: {
              show: true
            },
            saveAsImage: {
              show: true
            }
          }
        },
        calculable: true,
        xAxis: [{
          type: 'category',
          boundaryGap: false,
          data: xAxisData
        }],
        yAxis: [{
          type: 'value',
          scale: true
        }],
        series: [{
          name: '单位净值',
          type: 'line',
          data: fundValues,
          markPoint: {
            data: [{
              type: 'max',
              name: '最大值'
            },
            {
              type: 'min',
              name: '最小值'
            }]
          },
          markLine: {
            data: [{
              type: 'average',
              name: '平均值'
            }]
          }
        },
        {
          name: '持仓成本',
          type: 'line',
          data: fundUnitPrice,
          markPoint: {
            data: [{
              type: 'max',
              name: '最大值'
            },
            {
              type: 'min',
              name: '最小值'
            }]
          }
        },
		{
		  name: '收益率%',
		  type: 'line',
		  symbol: 'none',
		  data: []
		},
		{
		  name: '赎回年化收益率%',
		  type: 'line',
		  symbol: 'none',
		  data: []
		}]
      };

      var profitRateCompareOption = {
        title: {
          text: '收益率示意图',
          subtext: @fundID@
        },
        tooltip: {
          trigger: 'axis'
        },
        legend: {
		  y: -30,
          data: ['单位净值','持仓成本','收益率%', '赎回年化收益率%']
        },
        toolbox: {
          show: true,
          feature: {
            dataView: {
              show: true,
              readOnly: false
            },
            restore: {
              show: true
            },
            saveAsImage: {
              show: true
            }
          }
        },
        calculable: true,
        xAxis: [{
		  show: false,
          type: 'category',
          boundaryGap: false,
          data: xAxisData
        }],
        yAxis: [{
          type: 'value',
          scale: true,
		  axisLabel: {
			formatter: function (v){
				return v+'%'
			}
		  }
		},
		{
		  type: 'value',
		  scale: true,
		  axisLabel: {
			formatter: function(v){
				return v+'%'
			}
		  },
		  position: 'right'
		}],
        series: [{
          name: '收益率%',
          type: 'line',
          data: fundProfitRate,
          markPoint: {
            data: [{
              type: 'max',
              name: '最大值'
            },
            {
              type: 'min',
              name: '最小值'
            }]
          },
        },
		{
          name: '赎回年化收益率%',
		  yAxisIndex: 1,
          type: 'line',
          data: fundProfitRatePerYear,
          markPoint: {
            data: [{
              type: 'max',
              name: '最大值'
            },
            {
              type: 'min',
              name: '最小值'
            }]
          },
        }
		]
      };

      var unitPriceCompare = ec.init(document.getElementById('unitPriceCompare'));
      unitPriceCompare.setOption(unitPriceCompareOption);

	  var profitRateCompare = ec.init(document.getElementById('profitRateCompare'));
	  profitRateCompare.setOption(profitRateCompareOption);
	  
	  unitPriceCompare.connect([profitRateCompare]);
	  profitRateCompare.connect([unitPriceCompare]);
    });
  </script> 
 </body>
</html>
